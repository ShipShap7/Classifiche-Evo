<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Classifiche</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #000;     /* sfondo nero, puoi mettere #fff */
      overflow: hidden;
    }

    /* wrapper trasparente e ‚Äúinvisibile‚Äù */
    .wrapper {
      width: 100%;
      max-width: none;
      margin: 0 auto;
    }

    /* NESSUN TITOLO */
    .widget-title {
      display: none !important;
    }

    /* area visiva del widget (niente bordo, niente sfondo) */
    .slider {
      position: relative;
      width: 100%;
      height: min(65vh, 400px); /* regolazione altezza */
      border-radius: 0;
      overflow: hidden;
      background: transparent !important;
      border: none !important;
    }

    .widget-slide {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.7s ease-in-out;
      overflow: hidden;
    }

    .widget-slide.active {
      opacity: 1;
      pointer-events: auto;
    }

    /* forzo i widget Scoreaxis a riempire l'area */
    .scoreaxis-widget {
      width: 100% !important;
      height: 100% !important;
      font-size: 12px !important;
      background-color: #ffffff !important;
      color: #141416 !important;
      border: none !important;
      overflow-y: auto !important;
      overflow-x: hidden !important;
    }

    /* nascondo le scrollbar (solo estetica) */
    .scoreaxis-widget::-webkit-scrollbar {
      width: 0;
      height: 0;
    }
    .scoreaxis-widget {
      scrollbar-width: none; /* Firefox */
    }
  </style>
</head>
<body>

<div class="wrapper">
  <!-- titolo presente nel DOM ma nascosto via CSS -->
  <div id="widgetTitle" class="widget-title">Classifica Serie A</div>

  <div class="slider">
    <!-- SLIDE 1 ‚Äì SERIE A -->
    <div class="widget-slide active" data-name="Classifica Serie A">
      <div id="widget-t7iwmiwajwu1" class="scoreaxis-widget" style="width:auto;height:auto;font-size:14px;background-color:#ffffff;color:#141416;border:1px solid;border-color:#ecf1f7;overflow:auto;">
        <script src="https://widgets.scoreaxis.com/api/football/league-table/62322b827aee66235a2be718?widgetId=t7iwmiwajwu1&lang=it&teamLogo=1&tableLines=0&homeAway=1&header=0&position=1&goals=0&gamesCount=1&diff=0&winCount=1&drawCount=1&loseCount=1&lastGames=1&points=1&teamsLimit=all&links=1&font=roboto&fontSize=12&widgetWidth=auto&widgetHeight=auto&bodyColor=%23ffffff&textColor=%23141416&linkColor=%23141416&borderColor=%23ecf1f7&tabColor=%23f3f8fd" async></script>
        <div class="widget-main-link" style="padding:6px 12px;font-weight:500;">Live data by <a href="https://www.scoreaxis.com/" style="color:inherit;">Scoreaxis</a></div>
      </div>
    </div>

    <!-- SLIDE 2 ‚Äì SERIE B -->
    <div class="widget-slide" data-name="Classifica Serie B">
      <div id="widget-rci4miwal5ot" class="scoreaxis-widget" style="width:auto;height:auto;font-size:14px;background-color:#ffffff;color:#141416;border:1px solid;border-color:#ecf1f7;overflow:auto;">
        <script src="https://widgets.scoreaxis.com/api/football/league-table/62321ed77200b25ca50e49d6?widgetId=rci4miwal5ot&lang=it&teamLogo=1&tableLines=0&homeAway=1&header=0&position=1&goals=0&gamesCount=1&diff=0&winCount=1&drawCount=1&loseCount=1&lastGames=1&points=1&teamsLimit=all&links=1&font=roboto&fontSize=12&widgetWidth=auto&widgetHeight=auto&bodyColor=%23ffffff&textColor=%23141416&linkColor=%23141416&borderColor=%23ecf1f7&tabColor=%23f3f8fd" async></script>
        <div class="widget-main-link" style="padding:6px 12px;font-weight:500;">Live data by <a href="https://www.scoreaxis.com/" style="color:inherit;">Scoreaxis</a></div>
      </div>
    </div>

    <!-- SLIDE 3 ‚Äì CHAMPIONS -->
    <div class="widget-slide" data-name="Classifica Champions League">
      <div id="widget-9pq8miwaltan" class="scoreaxis-widget" style="width:auto;height:auto;font-size:14px;background-color:#ffffff;color:#141416;border:1px solid;border-color:#ecf1f7;overflow:auto;">
        <script src="https://widgets.scoreaxis.com/api/football/league-table/6232267fbf1fa71a67215dfc?widgetId=9pq8miwaltan&lang=it&teamLogo=1&tableLines=0&homeAway=1&header=0&position=1&goals=0&gamesCount=1&diff=0&winCount=1&drawCount=1&loseCount=1&lastGames=1&points=1&teamsLimit=all&links=1&font=roboto&fontSize=12&widgetWidth=auto&widgetHeight=auto&bodyColor=%23ffffff&textColor=%23141416&linkColor=%23141416&borderColor=%23ecf1f7&tabColor=%23f3f8fd" async></script>
        <div class="widget-main-link" style="padding:6px 12px;font-weight:500;">Live data by <a href="https://www.scoreaxis.com/" style="color:inherit;">Scoreaxis</a></div>
      </div>
    </div>
  </div>
</div>

<script>
  const slides = document.querySelectorAll('.widget-slide');
  const titleEl = document.getElementById('widgetTitle');

  // Config per ogni classifica (in ordine: Serie A, Serie B, Champions)
  // before = pausa prima che inizi lo scroll (ms)
  // duration = durata dello scroll (ms)
  // after = pausa finale, dopo lo scroll, prima di passare alla successiva (ms)
  const SCROLL_CONFIG = [
    { before: 3000, duration: 15000, after: 4000 }, // Serie A
    { before: 3000, duration: 15000, after: 4000 }, // Serie B
    { before: 3000, duration: 22000, after: 4000 }, // Champions (pi√π lenta)
  ];

  let currentIndex = 0;
  let scrollAnimId = null;
  let pauseTimeoutId = null;
  let beforeTimeoutId = null;

  function clearTimers() {
    if (scrollAnimId !== null) {
      cancelAnimationFrame(scrollAnimId);
      scrollAnimId = null;
    }
    if (pauseTimeoutId !== null) {
      clearTimeout(pauseTimeoutId);
      pauseTimeoutId = null;
    }
    if (beforeTimeoutId !== null) {
      clearTimeout(beforeTimeoutId);
      beforeTimeoutId = null;
    }
  }

  function showSlide(index) {
    clearTimers();

    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === index);
    });

    // il titolo √® nascosto, ma lo aggiorno comunque (non d√† fastidio)
    if (titleEl) {
      titleEl.textContent = slides[index].dataset.name || '';
    }

    const slide = slides[index];
    const cfg = SCROLL_CONFIG[index] || { before: 1000, duration: 15000, after: 4000 };

    // piccola attesa per dare tempo al widget di disegnarsi
    const INTERNAL_DELAY = 800;

    // pausa PRIMA di iniziare lo scroll (personalizzata per slide)
    beforeTimeoutId = setTimeout(() => {
      startAutoScroll(slide, cfg);
    }, cfg.before + INTERNAL_DELAY);
  }

  function startAutoScroll(slide, cfg) {
    const widget = slide.querySelector('.scoreaxis-widget');
    if (!widget) {
      // se non troviamo il widget, saltiamo alla successiva dopo la pausa finale
      pauseTimeoutId = setTimeout(nextSlide, cfg.after);
      return;
    }

    widget.scrollTop = 0;

    // se non c'√® nulla da scrollare, passa direttamente dopo la pausa finale
    if (widget.scrollHeight <= widget.clientHeight) {
      pauseTimeoutId = setTimeout(nextSlide, cfg.after);
      return;
    }

    // üîë calcoliamo la posizione specifica per avere l'ULTIMA squadra visibile
    function getTargetScroll() {
      const lastRow = widget.querySelector('tbody tr:last-child');
      if (lastRow) {
        const rowBottom = lastRow.offsetTop + lastRow.offsetHeight;
        // vogliamo che il bottom dell‚Äôultima riga cada dentro la finestra visibile
        return Math.max(0, rowBottom - widget.clientHeight + 8);
      }
      // fallback se non troviamo la tabella
      return Math.max(0, widget.scrollHeight - widget.clientHeight);
    }

    const startTime = performance.now();

    function step(now) {
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / cfg.duration, 1);

      // ricalcoliamo il target ad ogni frame (il widget pu√≤ ‚Äúcrescere‚Äù un po‚Äô)
      const targetScroll = getTargetScroll();
      widget.scrollTop = targetScroll * progress;

      if (progress < 1) {
        scrollAnimId = requestAnimationFrame(step);
      } else {
        // quando finisce, assicuriamoci di essere al fondo calcolato
        widget.scrollTop = getTargetScroll();
        // pausa DOPO lo scroll, prima di passare alla prossima classifica
        pauseTimeoutId = setTimeout(nextSlide, cfg.after);
      }
    }

    scrollAnimId = requestAnimationFrame(step);
  }

  function nextSlide() {
    currentIndex = (currentIndex + 1) % slides.length;
    showSlide(currentIndex);
  }

  // avvio
  showSlide(currentIndex);
</script>

</body>
</html>
